<template>
  <lightning-card>
     
        
          <p class="slds-var-p-left_x-small" style="text-align:left"> <strong><font size="4"></font></strong> </p> 
            <lightning-tabset variant="scoped"> 
              
                                <lightning-tab  label="Record CleanUp" onactive={RecordCleanUpHandler} > 
                                  

                                    <label class="slds-form-element__label">
                                      <p class="slds-var-p-left_x-small" style="text-align:left"><strong><font size="3">SELECT OBJECT :- </font></strong></p>
                                    </label> <br/>
                              
                                        <p class="slds-var-p-left_x-small" style="text-align:middle"> <strong><font size="+3">
                                              <lightning-radio-group  name="radioGroup"
                                                                      label="SELECT OBJECT :-"
                                                                      options={options} 
                                                                      value={value} 
                                                                      onchange={handleChange} 
                                                                      type="radio"
                                                                      variant="label-hidden"
                                                                      style="columns: 3;">
                                              </lightning-radio-group>
                                        </font></strong> </p> <br/>

                                        <footer class="slds-modal__footer">
                                          <center><p class="slds-var-p-left_x-small" style="text-align:middle"> <strong><font size="3">
                                            <lightning-button variant="brand-outline" label="Proceed" onclick={ProceedselectedHandler} class="slds-p-around_x-medium"></lightning-button>&nbsp; &nbsp; &nbsp;
                                            
                                          </font></strong> </p></center>
                                  </footer>
                                              
                              
                                        <template if:true={showUserStoryPopupFlag}>
                                              <!--Calling Child Compo Starts-->
                                              <c-user-story-pop-up-compo object-received={objectName} onuserstorypopupevent={userStoryclosePopupHandler}></c-user-story-pop-up-compo>
                                              <!--Calling Child Compo Ends-->
                                        </template> 


                                        <template if:true={showScheduledFlag}>
              
                                          <!--Calling Child Compo Starts-->
                                          <c-scheduled-popup-compo object-name-received={objectName}  onschedulepopupevent={scheduleclosePopupHandler}> </c-scheduled-popup-compo>
                                          <!--Calling Child Compo Ends-->
                                    
                                        </template>


                                </lightning-tab>


                    <lightning-tab  label="Branch CleanUp" onactive={BranchCleanUpHandler} >
                            

                                    <p class="slds-var-p-left_x-small" style="text-align:left"><strong><font size="2">
                                              <lightning-record-edit-form
                                                      object-api-name="copado__Git_Commit__c"
                                                      onsuccess={handleSuccess}>
                                                  
                                                                <lightning-input-field
                                                                    field-name="copado__Git_Repository__c"
                                                                    onchange={handleChange1}
                                                                    style="width:350px" >
                                                                </lightning-input-field>
                                                      
                                              </lightning-record-edit-form>
                                        </font></strong></p><br/><br/>

                            
                                        <template if:true={showButtonFlag}> 
                                      

                                            <div class="slds-form-element">
                                              <p class="slds-var-p-left_x-small" style="text-align:left"><strong><font size="2">
                                                <label class="slds-form-element__label" for="text-input-id-1"> API Key</label> <br/>
                                                      <input type="text"  name="apiKey" value={apiKeyVar} style="width:350px" class="slds-input"/>&nbsp;
                                                      <lightning-helptext content="API Key is present in Account Summary Tab. Prvoide the API Key present in the Account Summary Tab"></lightning-helptext>
                                              </font></strong></p>
                                            </div><br/><br/>

                                            <div class="slds-form-element">
                                              <p class="slds-var-p-left_x-small" style="text-align:left"><strong><font size="2">
                                                <label class="slds-form-element__label" for="text-input-id-1"> Server URL</label> <br/>
                                                      <input type="text" name="serverUrl" value={serverUrlVar} style="width:350px" class="slds-input" /> &nbsp;
                                                      
                                                      <lightning-helptext  content="Server URL is present in Account Summary Tab. Prvoide the server URL present in the Account Summary Tab"></lightning-helptext>
                                              </font></strong></p>
                                            </div><br/><br/>


                                            <div class="slds-form-element">
                                              <p class="slds-var-p-left_x-small" style="text-align:left"><strong><font size="2">
                                                  <label class="slds-form-element__label" for="text-input-id-1"> Branch to be Excluded</label> <br/>
                                                      <input type="text" name="branchToBe" value={branchToBeVar} style="width:350px" class="slds-input" /> &nbsp;
                                                      <lightning-helptext  content="Environment Brnaches to be prevented from deletion. Eg:- main,staging,uat (branch names are case-sensitive)"></lightning-helptext>
                                              </font></strong></p>
                                            </div><br/><br/>

                                      
                                            <form action="/action_page.php">
                                              <p class="slds-var-p-left_x-small" style="text-align:left"><strong><font size="2">
                                              <label for="Branch" >Branch Type :</label> &nbsp;&nbsp;
                                              <select name="Branches" id="Branches" onchange={changeHandler}>
                                                
                                                <option value="User Story">User Story </option>
                                                <option value="Promotion Branches">Promotion Branches</option>
                                              </select> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                                              <template if:true={show3MonthButton}>
                                              <lightning-button variant="brand-outline" label="3 Months" onclick={threeMonthHandler} ></lightning-button>
                                              </template> 

                                              <template if:true={show3MonthBrandButton}>
                                                <lightning-button variant="brand" label="3 Months" onclick={threeMonthBrandHandler} ></lightning-button>
                                                </template> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                                              <template if:true={show6MonthButton}>
                                              <lightning-button variant="brand-outline" label="6 Months" onclick={sixMonthHandler} > </lightning-button> 
                                            </template>

                                            <template if:true={show6MonthBrandButton}>
                                              <lightning-button variant="brand" label="6 Months" onclick={sixMonthBrandHandler} > </lightning-button> 
                                            </template>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                                              <lightning-button variant="brand-outline" label="Scheduled Job" onclick={ScheduledBranchFeatureJobHandler} class="slds-p-around_x-medium"> </lightning-button>
                                            </font></strong></p>
                                        </form> <br/><br/>

                                        
                                <template if:true={showBranchScheduledFlag}>
              
                                  <!--Calling Child Compo Starts-->
                                  <c-scheduled-branch-popup-compo object-name-received={objectName} onschedulebranchpopupevent={scheduleBranchCloseJobPopupHandler} repository-id={recordId} api-key={apiKeyVar} server-url={serverUrlVar} branch-tobe={branchToBeVar} > </c-scheduled-branch-popup-compo>
                                  <!--Calling Child Compo Ends-->
                            
                              </template>



                                          <footer class="slds-modal__footer">
                                            <center><p class="slds-var-p-left_x-small" style="text-align:middle"><strong><font size="3">
                                                <lightning-button variant="brand-outline"  label="Proceed" onclick={proceedHandler}  class="slds-p-around_x-medium"></lightning-button>
                                              </font></strong></p></center>
                                          </footer>  <br/><br/>

                                          

                                        </template>

                        </lightning-tab>
       
        </lightning-tabset>


          <template if:true={showPopupModel}> 
            

            <section aria-modal="true" class="slds-modal slds-fade-in-open">
              <div class="slds-modal__container ">
                
                          <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={closeModal}>
                            <lightning-icon icon-name="utility:close"
                                alternative-text="close"
                                variant="inverse"
                                size="x-small"></lightning-icon>
                            <span class="slds-assistive-text">Close</span>    
                        </button>

                        <div class="slds-modal__content">
                          <div class="slds-p-around_small">
                        
                                <header class="slds-modal__header">
                                           <h2 class="slds-text-heading_medium"><strong><p style="color:rgb(6, 4, 6)">Selection Page Feature</p></strong> </h2><br/>
                               
                              </header><br/>


                              <div class="slds-modal__content">
                                <div class="slds-p-around_small">
                                        <p class="slds-var-p-left_x-small" style="text-align:left"> <strong><font size="2">
                                                  
                                          Selected Records = {selectedRecordsCount} <br/><br/>
                                          
                                        </font></strong></p>

                                       
                                                  <lightning-datatable
                                                                key-field="Id"
                                                                data={recordList}
                                                                columns={columns}    
                                                                draft-values={draftValues} 
                                                                onrowselection={selectedRecordsHandler}                     
                                                                onsave={saveHandler}> 
                                                  </lightning-datatable><br/><br/>

                                          </div>
                                        </div>

                                      </div>
                                    </div>
                              
                                                          <template if:true={showSpinnerFlag} >
                                                                  <div class="backgroundInverse" style="min-height:3rem;transform: translate(0, 0);">
                                                                      <lightning-spinner alternative-text="Loading" size="small" ></lightning-spinner>
                                                                  </div>
                                                           </template>
                                            
                             
                                                         
                                                              <footer class="slds-modal__footer">
                                                                    <center><p class="slds-var-p-left_x-small" style="text-align:middle"> <strong><font size="2">
                                                                      <lightning-button variant="brand-outline" label="Cancel" onclick={closeModal} class="slds-p-around_x-small"></lightning-button> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                                      <lightning-button variant="brand-outline" label="Reset" onclick={resetHandler} > </lightning-button> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;
                                                                      <lightning-button variant="brand-outline" label="Proceed" onclick={selectedHandler} class="slds-p-around_x-medium"></lightning-button>&nbsp; &nbsp; &nbsp;
                                                                      
                                                                    </font></strong> </p></center>
                                                            </footer>
                                              
                       
                                                  

                                                  <template if:true={selectedPopup}>

                                                    <section aria-modal="true" class="slds-modal slds-fade-in-open">
                                                      <div class="slds-modal__container ">

                                                        <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close" onclick={closeModalTwo}>
                                                          <lightning-icon icon-name="utility:close"
                                                              alternative-text="close"
                                                              variant="inverse"
                                                              size="x-small"></lightning-icon>
                                                          <span class="slds-assistive-text">Close</span>    
                                                      </button>

                                                      <div class="slds-modal__content">
                                                        <div class="slds-p-around_small">
                                                          <header class="slds-modal__header">
                                                            <h2 class="slds-text-heading_medium"><strong><p style="color:rgb(6, 4, 6)">Selected Branches</p></strong> </h2>
                                                            
                                                          </header><br/>

                                                          <div class="slds-modal__content">
                                                              <div class="slds-p-around_small">
                                                                <p class="slds-var-p-left_x-small" style="text-align:left"> <strong><font size="2">
                                                                    
                                                                    Total Record = {totalselectedRecords}  <br/><br/>
                                                                    
                                                                  </font></strong></p>
                                              
                                                                      <!--DATA TABLE START -->  
                                              
                                                                       
                                                                    <div style="height:1000px;">
                                                                      <lightning-datatable
                                                                              key-field="id"
                                                                              data={selectedRecords}
                                                                              show-row-number-column
                                                                              row-number-offset={rowOffset}
                                                                              hide-checkbox-column
                                                                              columns={columns}>
                                                                      </lightning-datatable>
                                                                  </div>
                                              
                                                                   <!-- DATA TABLE END-->
  
                                                              </div>
                                                          </div>
                                                        </div>
                                                      </div> 
                                                    
                                                    <footer class="slds-modal__footer">
                                                      
                                                      <center><p class="slds-var-p-left_x-small" style="text-align:middle"> <strong><font size="2">
                                                        <lightning-button variant="brand-outline" label="Cancel" onclick={closeModalTwo} class="slds-p-around_x-small"></lightning-button> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                                        <lightning-button variant="destructive" label="Delete" onclick={deleteHandler} > </lightning-button>
                                                      </font></strong> </p></center>
                                                    
                                                    </footer>
                                                  </div>
                                                </section>
                                                <div class="slds-backdrop slds-backdrop_open"></div>
                              
                                              </template>
                                                        
                            </div>
                          </section>
                                                       
                        
                        <div class="slds-backdrop slds-backdrop_open"></div>
                      
                     </template>
               
</lightning-card>
</template>